<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Conclave</title>
    <link rel="icon" href="/static/favicon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="/static/homelab-ui.css" />
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <header class="app-header">
      <div class="brand">
        <div class="sigil">C</div>
        <div>
          <div class="brand-title">Conclave</div>
          <div class="brand-sub ui-muted">Decision pipeline dashboard.</div>
        </div>
      </div>
      <div class="header-actions">
        <div class="status-pill ui-mono" id="status" role="status" aria-live="polite">Idle</div>
        <div class="smoke-indicator" id="smoke" aria-hidden="true"></div>
        <span class="sr-only" id="smoke-status">No consensus in progress.</span>
        <button type="button" class="ui-button" id="rerun-latest">Re-run Latest</button>
      </div>
    </header>

    <main class="app">
      <section class="ui-card panel input-panel">
        <div class="panel-header">
          <h2 class="panel-title">Prompt Editor</h2>
          <div class="panel-meta ui-mono" id="prompt-status">Not saved</div>
        </div>
        <form id="query-form" class="form-grid">
          <label for="query">Prompt</label>
          <textarea id="query" name="query" rows="3" placeholder="Ask about tax, health, money, or a big decision..."></textarea>
          <div class="prompt-examples" id="prompt-examples">
            <button type="button" class="ui-chip" data-example="What daily vitamins should I take based on my health data?">Health vitamins</button>
            <button type="button" class="ui-chip" data-example="How should I adjust my asset allocation based on money.tannner.com?">Portfolio mix</button>
            <button type="button" class="ui-chip" data-example="Summarize my latest tax filings and highlight action items.">Tax actions</button>
            <button type="button" class="ui-chip" data-example="Review the latest bounty target context and propose next hunt steps.">Bounty hunt</button>
          </div>
          <label for="input-title">Title (saved to Markdown)</label>
          <input id="input-title" name="input-title" type="text" placeholder="e.g., 2026 Health Action Plan Notes" />
          <label for="input-notes">Supporting notes (saved)</label>
          <textarea id="input-notes" name="input-notes" rows="6" placeholder="Paste notes or context to persist. These will be saved and used as evidence."></textarea>
          <label for="input-artifacts">Artifacts (links or paths)</label>
          <textarea id="input-artifacts" name="input-artifacts" rows="3" placeholder="Paste file paths or URLs (one per line). Images/videos/docs are fine."></textarea>
          <div class="helper-text ui-muted">Context that will be included as evidence for this decision. Saved with run history.</div>
          <div class="actions">
            <button type="submit" class="ui-button primary">Run</button>
            <button type="button" class="ui-button" id="save-prompt">Save Prompt</button>
            <button type="button" class="ui-button ghost" id="clear-form">Clear</button>
          </div>
          <div class="helper-text ui-muted">Loaded prompts are updated when you click Save Prompt.</div>
        </form>
      </section>

      <section class="ui-card panel latest-panel">
        <div class="panel-header">
          <h2 class="panel-title">Latest Decision</h2>
          <div class="panel-meta ui-mono" id="latest-time">—</div>
        </div>
        <div class="latest-meta ui-mono" id="latest-prompt">Prompt: —</div>
        <div class="pipeline-progress" id="pipeline-progress"></div>
        <div class="latest-actions">
          <button type="button" class="ui-button ghost" id="copy-latest">Copy Output</button>
        </div>
        <div id="latest" class="markdown">No consensus yet.</div>
        <div class="latest-note ui-dim">Full detail is captured in the Decision Log.</div>
      </section>

      <section class="ui-card panel runs-panel">
        <div class="panel-header">
          <h2 class="panel-title">Decision Log</h2>
          <div class="panel-meta ui-mono">Rows show prompt, logs, and output.</div>
        </div>
        <div class="table">
          <div class="table-head">
            <div>Title</div>
            <div>Prompt / Input</div>
            <div>Process Logs</div>
            <div>Output</div>
            <div>Completed</div>
          </div>
          <div class="table-body" id="run-rows"></div>
        </div>
      </section>

      <section class="ui-card panel prompts-panel">
        <div class="panel-header">
          <h2 class="panel-title">Saved Prompts</h2>
          <div class="panel-meta ui-mono" id="prompt-count">0 saved</div>
        </div>
        <div class="prompt-list" id="prompt-list"></div>
      </section>
    </main>

    <script src="/static/app.js"></script>
  </body>
</html>
