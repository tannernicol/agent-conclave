server:
  host: 127.0.0.1
  port: 8099

data_dir: /home/tanner/.conclave

models:
  registry_path: /home/tanner/.conclave/models/registry.json
  benchmarks_path: /home/tanner/.conclave/models/benchmarks.jsonl
  health_path: /home/tanner/.conclave/models/health.json
  cards:
    - id: ollama:qwen2.5-coder:7b
      provider: ollama
      kind: local
      model_label: qwen2.5-coder:7b
      capabilities:
        text_reasoning: true
        code_generation: true
        code_review: low
        tool_use: false
        image_generation: false
        image_understanding: none
        json_reliability: medium
      constraints:
        max_context_tokens: 8192
        supports_system_prompt: true
        supports_streaming: false
      cost:
        usd_per_1m_input_tokens: 0
        usd_per_1m_output_tokens: 0
      perf_baseline:
        p50_latency_ms: 900
        p95_latency_ms: 3000
        tokens_per_sec: 40
    - id: ollama:qwen2.5-coder:32b
      provider: ollama
      kind: local
      model_label: qwen2.5-coder:32b
      capabilities:
        text_reasoning: true
        code_generation: true
        code_review: medium
        tool_use: false
        image_generation: false
        image_understanding: limited
        json_reliability: medium
      constraints:
        max_context_tokens: 8192
        supports_system_prompt: true
        supports_streaming: false
      cost:
        usd_per_1m_input_tokens: 0
        usd_per_1m_output_tokens: 0
      perf_baseline:
        p50_latency_ms: 1200
        p95_latency_ms: 4000
        tokens_per_sec: 35
    - id: ollama:qwen2.5:32b
      provider: ollama
      kind: local
      model_label: qwen2.5:32b
      capabilities:
        text_reasoning: true
        code_generation: low
        code_review: low
        tool_use: false
        image_generation: false
        image_understanding: limited
        json_reliability: medium
      constraints:
        max_context_tokens: 8192
        supports_system_prompt: true
        supports_streaming: false
      cost:
        usd_per_1m_input_tokens: 0
        usd_per_1m_output_tokens: 0
      perf_baseline:
        p50_latency_ms: 1300
        p95_latency_ms: 4500
        tokens_per_sec: 32
    - id: cli:claude
      provider: cli
      kind: external
      model_label: claude:opus-4.5
      command:
        - /home/tanner/.local/bin/claude
        - --print
        - --output-format
        - text
        - --model
        - opus
        - --no-session-persistence
      prompt_mode: arg
      timeout_seconds: 120
      env:
        NO_COLOR: "1"
      capabilities:
        text_reasoning: true
        code_generation: medium
        code_review: high
        tool_use: false
        image_generation: false
        image_understanding: limited
        json_reliability: high
      constraints:
        max_context_tokens: 200000
        supports_system_prompt: true
        supports_streaming: false
      cost:
        usd_per_1m_input_tokens: 0
        usd_per_1m_output_tokens: 0
      perf_baseline:
        p50_latency_ms: 2500
        p95_latency_ms: 8000
        tokens_per_sec: 25
    - id: cli:codex
      provider: cli
      kind: external
      model_label: codex (auto)
      command:
        - /usr/local/bin/codex
        - exec
        - --skip-git-repo-check
        - --sandbox
        - read-only
      prompt_mode: stdin
      stdin_flag: "-"
      timeout_seconds: 120
      env:
        NO_COLOR: "1"
      fallback_model: ollama:qwen2.5-coder:32b
      capabilities:
        text_reasoning: true
        code_generation: high
        code_review: high
        tool_use: true
        image_generation: false
        image_understanding: none
        json_reliability: medium
      constraints:
        max_context_tokens: 32768
        supports_system_prompt: true
        supports_streaming: false
      cost:
        usd_per_1m_input_tokens: 0
        usd_per_1m_output_tokens: 0
      perf_baseline:
        p50_latency_ms: 3000
        p95_latency_ms: 10000
        tokens_per_sec: 20

planner:
  prefer_local: true
  prefer_best: false
  role_overrides:
    reasoner: cli:codex
    critic: cli:claude
    summarizer: cli:claude
  weights:
    latency: 0.35
    reliability: 0.25
    cost: 0.2
    affinity: 0.2
  role_affinity:
    router: {speed: 1.0, reasoning: 0.4, json: 0.6}
    explorer: {speed: 0.6, reasoning: 0.8, json: 0.4}
    reasoner: {speed: 0.3, reasoning: 1.0, json: 0.5}
    critic: {speed: 0.2, reasoning: 1.0, json: 0.8}
    builder: {speed: 0.4, reasoning: 0.7, json: 0.6}
    summarizer: {speed: 0.4, reasoning: 0.8, json: 0.7}

rag:
  base_url: http://localhost:8091
  use_server_collections: true
  skip_empty_collections: true
  trust_explicit_collections: true
  max_results_per_collection: 8
  prefer_non_pdf: true
  min_score: 0.2
  min_snippet_len: 40
  min_filename_snippet: 120
  exclude_collections:
    - homelab-rag
    - claude-context
    - prompts
  exclude_path_patterns:
    - "**/Bookmarks*"
    - "**/bookmarks/**"
    - "**/audit-*.json"
    - "**/audit*.json"
    - "**/history.jsonl"
  collection_reliability:
    tax-rag: high
    tax-data: high
    health-rag: high
    health-data: high
    money-api: high
    bounty-rag: high
    bugbounty-rag: high
    smart-contracts: high
    security-library: medium
    web-security: medium
    crypto-security: medium
    survival-library: medium
  default_collections:
    - notes
  domain_collections:
    tax: [tax-rag, tax-data, homelab-rag]
    health: [health-rag, health-data, homelab-rag]
    bounty: [bounty-rag, bugbounty-rag, smart-contracts, security-library, web-security, crypto-security]
    security: [security-library, web-security, smart-contracts]
    money: [homelab-rag, prompts]
    agriculture: [survival-library, notes]
  dynamic_patterns:
    bounty:
      - "bounty"
      - "security"
      - "smart"
      - "crypto"
      - "solidity"
      - "defi"
      - "audit"
      - "dex"
      - "amm"
    health:
      - "health"
      - "medical"
      - "genetic"
    tax:
      - "tax"
      - "irs"
      - "finance"
    money:
      - "money"
      - "finance"
      - "portfolio"
    agriculture:
      - "agriculture"
      - "farm"
      - "orchard"
      - "crop"
      - "soil"

index:
  enabled: true
  auto_build: false
  auto_refresh_days: 7
  allowlist:
    - /mnt/nas/Homelab
    - /mnt/nas/Public
    - /mnt/nas/files
    - /home/tanner/bug-bounty-recon/targets
  exclude_patterns:
    - "**/.git/**"
    - "**/node_modules/**"
    - "**/venv/**"
    - "**/__pycache__/**"
    - "**/.ssh/**"
    - "**/.gnupg/**"
    - "**/.password-store/**"
    - "**/credentials/**"
    - "**/keys/**"
    - "/mnt/nas/Backups/**"
    - "/mnt/nas/Media/**"
    - "/mnt/nas/Multimedia/**"
    - "/mnt/nas/Download/**"
    - "/mnt/nas/Homelab/Backups/**"
    - "/mnt/nas/Homelab/Media/**"
    - "/mnt/nas/Homelab/Multimedia/**"
    - "/mnt/nas/Homelab/Download/**"
    - "/mnt/nas/Homelab/Photos/**"
    - "/mnt/nas/Homelab/Docker/**"
    - "/mnt/nas/Homelab/Container/**"
    - "/mnt/nas/Homelab/homelab-backup/**"
  max_file_mb: 2

calibration:
  enabled: true
  providers:
    - ollama
    - cli
  max_seconds: 20
  ping_prompt: "Return only: OK"

deliberation:
  max_rounds: 3
  require_agreement: true

quality:
  strict: true
  block_on_insufficient: false
  fail_on_rag_errors: false
  min_evidence: 2
  low_signal_threshold: 0.5
  high_signal_threshold: 1.0
  high_evidence_min: 6
  min_strong_evidence: 0
  min_content_evidence: 1
  min_non_user_evidence: 1
  min_required_collection_hits: 0
  domain_overrides:
    general:
      min_evidence: 1
      min_non_user_evidence: 0
      min_content_evidence: 0
      min_strong_evidence: 0
      allow_user_only: true
    security:
      min_evidence: 1
      min_non_user_evidence: 0
      min_content_evidence: 0
      min_strong_evidence: 0
      allow_user_only: true
    agriculture:
      min_evidence: 1
      min_non_user_evidence: 0
      min_content_evidence: 0
      min_strong_evidence: 0
      allow_user_only: true
  pdf_ratio_limit: 0.7
  off_domain_ratio_limit: 0.5
  strict_exit_code: 2
  domain_paths:
    bounty:
      - /mnt/bounty/**
      - /mnt/nas/Homelab/BugBounty/**
      - /home/tanner/bounty-rag/**
      - /home/tanner/security-library/**
      - /home/tanner/bug-bounty-recon/targets/**
    security:
      - /home/tanner/security-library/**
    health:
      - /mnt/nas/Homelab/Health/**
      - /home/tanner/health-data/**
      - /home/tanner/health-rag/**
    tax:
      - /mnt/nas/Homelab/Tax/**
      - /home/tanner/tax-data/**
      - /home/tanner/tax-rag/**
    money:
      - /mnt/nas/Homelab/Finance/**
      - /mnt/nas/Homelab/Money/**
      - /home/tanner/money/**
    agriculture:
      - /home/tanner/survival-library/**

bounty_integration:
  enabled: true
  base_dir: /home/tanner/bug-bounty-recon
  targets_dir: /home/tanner/bug-bounty-recon/targets
  submissions_dir: /home/tanner/bug-bounty-recon/submissions
  findings_dir: /home/tanner/bug-bounty-recon/findings
  hunt_state_path: /home/tanner/bug-bounty-recon/hunt-state.json
  run_dir_name: conclave-runs
  export_runs: true
  export_markdown: true
  max_reports: 12
  max_locations: 12

sources:
  health_dashboard_url: http://127.0.0.1:8094
  health_pages:
    - /my-health.html
    - /recommendations.html
    - /genetic-grade.html
  money_api_url: http://127.0.0.1:8000
  money_endpoints:
    - /api/summary
    - /api/networth
    - /api/investments/performance

topics:
  - id: tax-checkup
    query: "Summarize recent tax changes that affect me and highlight any action items."
    collections: [tax-rag, tax-data]
    schedule: weekly
  - id: health-checkup
    query: "Summarize the latest health data available and flag any anomalies or follow-ups."
    collections: [health-rag, health-data]
    schedule: weekly
  - id: bounty-checkup
    query: "Summarize latest bounty learnings and propose high-leverage hunt ideas."
    collections: [bounty-rag, bugbounty-rag, security-library]
    schedule: weekly
